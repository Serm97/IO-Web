/*!
 * Start Bootstrap - SB Admin 2 v4.0.7 (https://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function(i){let t={},o=[];function e(){let e='<tr><td scope="row">  <input class="form-control form-control-sm" type="text" value="Alternativa X"> </td><td>  <input class="form-control form-control-sm" type="number" placeholder="Ingrese el valor"> </td><td>  <input class="form-control form-control-sm" type="number" placeholder="Ingrese el valor"> </td></tr>';i("#tabledata").append(e)}function a(){var e=document.getElementById("tabledata");var t=e.rows[0].cells.length;var o=e.rows.length;for(var a=0;a<o;a++){var r=e.rows[a];var n=r.insertCell(t);if(a==0)n.innerHTML="<th><b>Evento</b></th>";else if(a==1)n.innerHTML='<td>  <input class="form-control form-control-sm" type="text" placeholder="Ingrese el nombre" value="Estado X"> </td>';else n.innerHTML='<td>  <input class="form-control form-control-sm" type="number" placeholder="Ingrese el valor"> </td>'}var e=document.getElementById("probability");var t=e.rows[0].cells.length;var o=e.rows.length;for(var a=0;a<o;a++){var r=e.rows[a];var n=r.insertCell(t);if(a==0)n.innerHTML="<th><b>Evento</b></th>";else n.innerHTML='<td>  <input class="form-control form-control-sm" type="text" placeholder="Ingrese el valor"> </td>'}}function r(){var e=document.getElementById("tabledata");var t=e.rows[0].cells.length;var o=e.rows.length;for(var a=0;a<o;a++){var r=e.rows[a];r.deleteCell(t-1)}var e=document.getElementById("probability");var t=e.rows[0].cells.length;var o=e.rows.length;for(var a=0;a<o;a++){var r=e.rows[a];r.deleteCell(t-1)}}function n(){var e=document.getElementById("tabledata");var t=e.rows.length;if(t<=2)alert("No se puede eliminar los encabezados");else e.deleteRow(t-1)}function l(){o=[];i("#tabledata tbody tr").each(function(){let e=[];i(this).find("td").each(function(){e.push(i(this).find("input").val())});o.push(e)});t.Matriz=o}function s(){l();i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetWaldCriterion",data:JSON.stringify(t),success:function(e){console.log(e);m(e)},error:function(e){console.log(e);alert("Ocurrio un error")}})}function c(){l();i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetMaximaxCriterion",data:JSON.stringify(t),success:function(e){console.log(e);m(e)},error:function(e){console.log(e);alert("Ocurrio un error")}})}function d(){l();console.log(t);i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetSavageCriterion",data:JSON.stringify(t),success:function(e){console.log(e);m(e)},error:function(e){console.log(e);alert("Ocurrio un error")}})}function p(){l();t.Alfa=i("#alfaVal").val();if(t.Alfa==""){alert("Debe indicar el valor de alfa para continuar");return}i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetHurwiczCriterion",data:JSON.stringify(t),success:function(e){console.log(e);m(e)},error:function(e){console.log(e);alert("Ocurrio un error")}})}function u(){let e=parseInt(i(this).val());let t="";switch(e){case 1:i("#no-probablistic").attr("hidden",true);i("#probablistic").removeAttr("hidden");i("#alfa").attr("hidden",true);i("#probability").removeAttr("hidden");t="probablistic";break;case 2:i("#probablistic").attr("hidden",true);i("#no-probablistic").removeAttr("hidden");i("#alfa").removeAttr("hidden");i("#probability").attr("hidden",true);t="no-probablistic";break;default:break}i("html, body").animate({scrollTop:i("#"+t+"").offset().top},2e3)}function m(e){let t=document.createElement("thead");let r=document.createElement("tbody");let o=document.createElement("tr");var a=e.Descripcion.split(";");a.pop();console.log(a);a.forEach(function(e){let t=document.createElement("tr");var o=e.split(":");console.log("info"+o);let a=document.createElement("td");a.appendChild(document.createTextNode(o[0]));t.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode("Estado: "+o[1].split("=")[2]));t.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode("Valor: $"+(new Intl.NumberFormat).format(o[1].split("=")[1].split(" ")[0])));t.appendChild(a);r.appendChild(t)});let n=document.createElement("tr");let l=document.createElement("td");l.setAttribute("colspan","3");l.setAttribute("style","text-align:center; background-color:#1cc88a;color:white");l.appendChild(document.createTextNode("ElecciÃ³n Sugerida por Criterio "+e.Criterio));n.appendChild(l);r.appendChild(n);n=document.createElement("tr");l=document.createElement("td");l.setAttribute("colspan","3");l.setAttribute("style","text-align:center;");l.appendChild(document.createTextNode(e.Resultado));n.appendChild(l);r.appendChild(n);i("#results").html(t);i("#results").html(r);i("#resultados").html(i("#results"));i("html, body").animate({scrollTop:i("#resultados").offset().top},2e3)}function f(){if(!C())return;l();h();i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetMatrizEMV",data:JSON.stringify(t),success:function(e){i("#solucion").text(e.Result);b(e)},error:function(e){console.log(e);alert("Ocurrio un error")}});i("html, body").animate({scrollTop:i("#resultados").offset().top},2e3)}function h(){let e=[];i("#probability tbody tr td").each(function(){e.push(i(this).find("input").val())});e.shift();t.Probability=e}function b(t){let o=document.createElement("thead");let a=document.createElement("tbody");let r=document.createElement("tr");console.log("Matriz: "+t.Matriz[0]);for(let e=0;e<t.Matriz[0];e++){let e=document.createElement("th");r.appendChild(document.createTextNode(dato));e.appendChild(celda);o.appendChild(e)}t.Matriz.forEach(function(e){let o=document.createElement("tr");e.forEach(function(e){let t=document.createElement("td");t.appendChild(document.createTextNode(e));o.appendChild(t)});a.appendChild(o)});i("#results").html(o);i("#results").html(a);i("#resultados").html(i("#results"));i("html, body").animate({scrollTop:i("#resultados").offset().top},2e3)}function v(){if(!C())return;l();h();i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetMatrizEOL",data:JSON.stringify(t),success:function(e){i("#solucion").text(e.Result);b(e)},error:function(e){console.log(e);alert("Ocurrio un error")}});i("html, body").animate({scrollTop:i("#resultados").offset().top},2e3)}function y(){if(!C())return;l();h();i.ajax({headers:{"Content-Type":"application/json"},type:"POST",dataType:"json",url:"https://invoperacionesapi.azurewebsites.net/api/Metodos/GetSensitivityAnalysis",data:JSON.stringify(t),success:function(e){T(e)},error:function(e){console.log(e);alert("Ocurrio un error")}});i("html, body").animate({scrollTop:i("#resultados").offset().top},2e3)}function T(o){let a=[];let e=o.Matriz.length-1;for(let t=1;t<=e;t++){let e={};e.x=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1];e.y=o.Matriz[t].splice(1,12);e.mode="lines+markers";e.type="scatter";e.name=o.Matriz[t][0];a.push(e)}var t=a;g=document.createElement("div");g.setAttribute("id","grafico");i("#resultados").html(g);Plotly.newPlot("grafico",t);i("html, body").animate({scrollTop:i("#grafico").offset().top},2e3)}function C(){if(i("#prob1").val()==""||i("#prob2").val()==""){alert("Debe indicar los valores de probabilidad");return false}var e=parseFloat(i("#prob1").val())+parseFloat(i("#prob2").val());if(e==0||e<1||e>1){alert("La suma de las probabilidades debe ser 1");return false}return true}i(function(){i("#aumentar-fila").on("click",e);i("#aumentar-col").on("click",a);i("#eliminar-fila").on("click",n);i("#eliminar-col").on("click",r);i("#maximin").on("click",s);i("#maximax").on("click",c);i("#regret").on("click",d);i("#hardwiz").on("click",p);i("#emv").on("click",f);i("#eol").on("click",v);i("#sensibility").on("click",y);i("#metodos").on("change",u)})}(window.jQuery,(window,document)),$("body").ready(function(){screen.width<1024?$("table").addClass("table-responsive"):$("table").removeClass("table-responsive")}),$(function(){$("#prob1").change(function(){var e=parseInt($(this).attr("max")),t=parseInt($(this).attr("min"));$(this).val()>e?$(this).val(e):$(this).val()<t&&$(this).val(t)}),$("#prob2").change(function(){var e=parseInt($(this).attr("max")),t=parseInt($(this).attr("min"));$(this).val()>e?$(this).val(e):$(this).val()<t&&$(this).val(t)}),$("#alfaVal").change(function(){var e=parseInt($(this).attr("max")),t=parseInt($(this).attr("min"));$(this).val()>e?$(this).val(e):$(this).val()<t&&$(this).val(t)})});